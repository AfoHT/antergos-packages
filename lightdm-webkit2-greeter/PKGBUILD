# Maintainer: Antergos Developers <dev@antergos.com>

pkgname=lightdm-webkit2-greeter
_pkgver=2.1.0rc1
pkgver=2.1.0rc5
pkgrel=1
pkgdesc="A webkit2 greeter for LightDM"
arch=('i686' 'x86_64')
url="https://github.com/antergos/lightdm-webkit2-greeter"
license=('GPL3')
makedepends=('gnome-doc-utils' 'gobject-introspection' 'intltool' 'gnome-common' 'exo')
depends=('lightdm' 'webkit2gtk>=2.10.8' 'gtk3>=3.18')
provides=('lightdm-webkit-greeter' 'lightdm-webkit-theme-antergos=2.4.0')
conflicts=('lightdm-webkit-greeter' 'lightdm-webkit-theme-antergos')
replaces=('lightdm-webkit-greeter' 'lightdm-webkit-theme-antergos<2.2.4')
install=greeter.install
backup=("etc/lightdm/${pkgname}.conf")
source=("${pkgname}-${pkgver}::http://github.com/Antergos/lightdm-webkit2-greeter/releases/download/2.1.0/${pkgname}-2.1.0rc1.zip")
sha256sums=('2fcdd461dbd42fb3e3f2b6e72a3311ceaee8a44a0b90d9955f63b6729ff28fd4')
groups=('system')


#pkgver() {
#	echo "${_pkgver}"
#}


build() {
	cd $srcdir
	touch themes/antergos/COPYING
	LIBS+="-ljavascriptcoregtk-4.0" ./autogen.sh --prefix=/usr --sysconfdir=/etc --libexecdir=/usr/lib/lightdm --bindir=/usr/bin --sbindir=/usr/bin
	make
}

package() {
	cd $srcdir
	make DESTDIR=$pkgdir install
	#sed -i 's|\/usr\/share\/backgrounds|\/usr\/share\/antergos\/wallpapers|g' ${pkgdir}/etc/${pkgname}.conf
}

# -*- mode: bash;-*-

