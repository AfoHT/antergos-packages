# Maintainer: Antergos Devs <devs@antergos.com>

pkgname=numix-icon-theme
pkgver=0.r1422.bca3c07
pkgrel=2
pkgdesc="Base icon theme from the Numix project"
arch=('any')
url='http://numixproject.org/'
license=('GPL3')
depends=('gnome-icon-theme')
makedepends=('git')
provides=("${pkgname}")
conflicts=("${pkgname}")
options=('!strip')
install="${pkgname}.install"
source=("git+http://github.com/numixproject/numix-icon-theme.git")
sha256sums=('SKIP')

pkgver() {
  cd ${srcdir}/${pkgname}

  printf "0.r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

package() {
  cd ${srcdir}/${pkgname}
  for icon in Numix/16/actions/**
  do
  	noext="${icon/.svg}"
  	mono=$(echo "${noext}""-symbolic.svg" | sed 's|16|scalable|')
  	if [[ -n ${mono} ]] && [[ -f ${mono} ]]; then
  		rm "${icon}"
  		ln -sr "${mono}" "${icon}"
  	fi
  done
  for icon in Numix/22/actions/**
  do
  	noext="${icon/.svg}"
  	mono=$(echo "${noext}""-symbolic.svg" | sed 's|22|scalable|')
  	if [[ -n ${mono} ]] && [[ -f ${mono} ]]; then
  		rm "${icon}"
  		ln -sr "${mono}" "${icon}"
  	fi
  done
  for icon in Numix/24/actions/**
  do
  	noext="${icon/.svg}"
  	mono=$(echo "${noext}""-symbolic.svg" | sed 's|24|scalable|')
  	if [[ -n ${mono} ]] && [[ -f ${mono} ]]; then
  		rm "${icon}"
  		ln -sr "${mono}" "${icon}"
  	fi
  done
  install -dm 755 "$pkgdir"/usr/share/icons
  cp -dr --no-preserve='ownership' Numix "$pkgdir"/usr/share/icons/
  cp -dr --no-preserve='ownership' Numix-Light "$pkgdir"/usr/share/icons/
}
# -*- mode: bash;-*-
