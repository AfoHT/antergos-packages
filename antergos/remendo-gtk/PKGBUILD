# Maintainer: Antergos devs <devs@antergos.com>

pkgname=(remendo-gtk)
_pkgname=remendo
pkgver=0.1.1
pkgrel=1
pkgdesc="Remendo Antergos warning system client"
arch=(x86_64)
url="http://www.antergos.com/"
license=(GPL3)
depends=('remendo' 'remendo-data' 'gtk3>=3.18' 'desktop-file-utils')
makedepends=('cmake' 'gobject-introspection' 'vala' 'git')
source=("${_pkgname}-${pkgver}::git://github.com/karasu/${_pkgname}")
sha256sums=('SKIP')

build() {
  cd ${srcdir}/${_pkgname}-${pkgver}/gtk
  mkdir -p build
  cd build
  cmake -DCMAKE_INSTALL_PREFIX=${pkgdir}/usr -DOPT_DYNAMIC_LIBRARY=TRUE -DCMAKE_BUILD_TYPE=Release ..
  make
}

package() {
  cd "${srcdir}/${_pkgname}-${pkgver}/gtk/build"
  install -d "${pkgdir}/usr/bin"
  make INSTALL_ROOT=${pkgdir} install

  install -d "${pkgdir}/usr/share/applications"
  cp "${srcdir}/${pkgname}-${pkgver}/gtk/remendo.desktop" "${pkgdir}/usr/share/applications"
}

